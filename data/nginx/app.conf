server {
    listen 8080;
    server_name  api-booking.ru 82.148.17.12;
    # server_name  testlocal.com;
    
    server_tokens off;
    client_max_body_size 75M;
    
    # api
    location /api/v1/present{
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_pass http://present_api:8080/api/v1/present;
    }
    # api docs
    location /api/v1/present/docs{
        proxy_pass http://present_api:8080/api/v1/present/docs;
    }
    # for fastapi swaggerUI
    location /api/v1/present/openapi.json {
        proxy_pass http://present_api:8080/api/v1/present/openapi.json;
    }
    location /api/v1/present/static {
        proxy_pass http://present_api:8080/api/v1/present/static;
    }

    location /ws/present {
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host $host;
            proxy_cache_bypass $http_upgrade;
            proxy_pass http://present_api:8080;
    }
}

server {
   listen 80;
    
   server_name api-booking.ru 82.148.17.12;
    # server_name  testlocal.com;
   server_tokens off;
   client_max_body_size 75M;
    location / {
       proxy_read_timeout          1m;
       proxy_connect_timeout       1m;
       proxy_pass http://front:3000;
    }
    # api
}
